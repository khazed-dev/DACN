===============================================
MIGRATION HOÃ€N THÃ€NH - TÃ“M Táº®T CHI TIáº¾T
===============================================

ğŸ“Š I. Cáº¤U TRÃšC THÆ¯Má»¤C Má»šI (FINAL)
===============================================

lib/
â”œâ”€â”€ ğŸ“‚ config/
â”œâ”€â”€ ğŸ“‚ models/
â”‚   â”œâ”€â”€ health_notes_model.dart
â”‚   â”œâ”€â”€ medical_drug.dart
â”‚   â”œâ”€â”€ prescription_model.dart
â”‚   â””â”€â”€ treatment_plan_model.dart
â”œâ”€â”€ ğŸ“‚ providers/
â”œâ”€â”€ ğŸ“‚ screens/
â”‚   â”œâ”€â”€ ğŸ“‚ auth/
â”‚   â”‚   â”œâ”€â”€ auth_gate.dart
â”‚   â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”‚   â”œâ”€â”€ register_screen.dart
â”‚   â”‚   â””â”€â”€ splash_screen.dart
â”‚   â”œâ”€â”€ ğŸ“‚ common/
â”‚   â”‚   â”œâ”€â”€ ehr_records_list_screen.dart
â”‚   â”‚   â”œâ”€â”€ ehr_record_detail_screen.dart
â”‚   â”‚   â”œâ”€â”€ prescription_detail_screen.dart
â”‚   â”‚   â”œâ”€â”€ prescription_list_screen.dart
â”‚   â”‚   â””â”€â”€ prescription_qr_screen.dart
â”‚   â”œâ”€â”€ ğŸ“‚ doctor/
â”‚   â”‚   â”œâ”€â”€ create_ehr_screen.dart
â”‚   â”‚   â”œâ”€â”€ create_prescription_screen.dart
â”‚   â”‚   â”œâ”€â”€ create_treatment_plan_screen.dart
â”‚   â”‚   â”œâ”€â”€ doctor_home_screen.dart
â”‚   â”‚   â”œâ”€â”€ doctor_patient_details_screen.dart
â”‚   â”‚   â”œâ”€â”€ doctor_patient_list_screen.dart
â”‚   â”‚   â”œâ”€â”€ doctor_prescription_detail_screen.dart
â”‚   â”‚   â”œâ”€â”€ doctor_prescription_list_screen.dart
â”‚   â”‚   â”œâ”€â”€ edit_prescription_screen.dart
â”‚   â”‚   â”œâ”€â”€ treatment_plan_detail_screen.dart
â”‚   â”‚   â””â”€â”€ treatment_plan_list_screen.dart
â”‚   â”œâ”€â”€ ğŸ“‚ patient/
â”‚   â”‚   â”œâ”€â”€ edit_health_notes_screen.dart
â”‚   â”‚   â”œâ”€â”€ health_notes_screen.dart
â”‚   â”‚   â”œâ”€â”€ patient_details_screen.dart
â”‚   â”‚   â”œâ”€â”€ patient_home_screen.dart
â”‚   â”‚   â”œâ”€â”€ patient_prescription_list_screen.dart
â”‚   â”‚   â””â”€â”€ patient_treatment_plan_list_screen.dart
â”‚   â”œâ”€â”€ ğŸ“‚ pharmacy/
â”‚   â”‚   â”œâ”€â”€ pharmacy_confirm_screen.dart
â”‚   â”‚   â”œâ”€â”€ pharmacy_history_screen.dart
â”‚   â”‚   â”œâ”€â”€ pharmacy_home_screen.dart
â”‚   â”‚   â”œâ”€â”€ pharmacy_scan_screen.dart
â”‚   â”‚   â””â”€â”€ pharmacy_verify_screen.dart
â”‚   â””â”€â”€ ai_classification_demo_screen.dart
â”œâ”€â”€ ğŸ“‚ services/
â”‚   â”œâ”€â”€ ai_classification_service.dart
â”‚   â”œâ”€â”€ auth_service.dart
â”‚   â”œâ”€â”€ encryption_service.dart
â”‚   â”œâ”€â”€ firebase_service.dart
â”‚   â”œâ”€â”€ health_notes_service.dart
â”‚   â”œâ”€â”€ prescription_service.dart
â”‚   â”œâ”€â”€ treatment_plan_service.dart
â”‚   â”œâ”€â”€ user_profile_service.dart
â”‚   â””â”€â”€ web3_service.dart
â”œâ”€â”€ ğŸ“‚ utils/
â”œâ”€â”€ ğŸ“‚ widgets/
â”œâ”€â”€ firebase_options.dart
â””â”€â”€ main.dart


ğŸ“‹ II. Báº¢NG MAPPING CHI TIáº¾T (FROM â†’ TO)
===============================================

### MODELS ###
modules/prescriptions/models/prescription_model.dart 
  â†’ lib/models/prescription_model.dart âœ“

modules/prescriptions/models/medical_drug.dart 
  â†’ lib/models/medical_drug.dart âœ“

modules/health_notes/models/health_notes_model.dart 
  â†’ lib/models/health_notes_model.dart âœ“

modules/treatment_plan/models/treatment_plan.dart 
  â†’ lib/models/treatment_plan_model.dart âœ“ (Renamed: thÃªm _model)


### SERVICES ###
modules/prescriptions/services/prescription_service.dart 
  â†’ lib/services/prescription_service.dart âœ“
  Import fix: '../models/prescription_model.dart' â†’ OK (váº«n dÃ¹ng relative path)

modules/health_notes/services/health_notes_service.dart 
  â†’ lib/services/health_notes_service.dart âœ“
  Import: '../models/health_notes_model.dart' â†’ OK

modules/treatment_plan/services/treatment_plan_service.dart 
  â†’ lib/services/treatment_plan_service.dart âœ“
  Import fix: '../models/treatment_plan.dart' â†’ '../models/treatment_plan_model.dart' âœ“

lib/services/user_profile_service.dart 
  â†’ GIá»® NGUYÃŠN âœ“ (Ä‘Ã£ á»Ÿ vá»‹ trÃ­ Ä‘Ãºng)


### SCREENS - AUTH ###
modules/auth/screens/auth_gate.dart 
  â†’ lib/screens/auth/auth_gate.dart âœ“

modules/auth/screens/login_screen.dart 
  â†’ lib/screens/auth/login_screen.dart âœ“

(ThÃªm má»›i - khÃ´ng cÃ³ trong modules cÅ©)
lib/screens/auth/register_screen.dart âœ“
lib/screens/auth/splash_screen.dart âœ“


### SCREENS - DOCTOR ###
modules/doctor/screens/doctor_home_screen.dart 
  â†’ lib/screens/doctor/doctor_home_screen.dart âœ“

modules/doctor/screens/doctor_patient_details_screen.dart 
  â†’ lib/screens/doctor/doctor_patient_details_screen.dart âœ“

modules/doctor/screens/doctor_patient_list_screen.dart 
  â†’ lib/screens/doctor/doctor_patient_list_screen.dart âœ“

modules/treatment_plan/screens/treatment_plan_list_screen.dart 
  â†’ lib/screens/doctor/treatment_plan_list_screen.dart âœ“
  Import fix: '../models/treatment_plan.dart' â†’ '../../models/treatment_plan_model.dart' âœ“

modules/treatment_plan/screens/create_treatment_plan_screen.dart 
  â†’ lib/screens/doctor/create_treatment_plan_screen.dart âœ“
  Import fix: '../models/treatment_plan.dart' â†’ '../../models/treatment_plan_model.dart' âœ“

modules/treatment_plan/screens/treatment_plan_detail_screen.dart 
  â†’ lib/screens/doctor/treatment_plan_detail_screen.dart âœ“
  Import fix: '../models/treatment_plan.dart' â†’ '../../models/treatment_plan_model.dart' âœ“

modules/prescriptions/screens/doctor_prescription_list_screen.dart 
  â†’ lib/screens/doctor/doctor_prescription_list_screen.dart âœ“
  Import fix: '../models/prescription_model.dart' â†’ '../../models/prescription_model.dart' âœ“

modules/prescriptions/screens/create_prescription_screen.dart 
  â†’ lib/screens/doctor/create_prescription_screen.dart âœ“
  Import fix: '../models/*' â†’ '../../models/*' âœ“

modules/prescriptions/screens/edit_prescription_screen.dart 
  â†’ lib/screens/doctor/edit_prescription_screen.dart âœ“
  Import fix: '../models/*' â†’ '../../models/*' âœ“

modules/prescriptions/screens/doctor_prescription_detail_screen.dart 
  â†’ lib/screens/doctor/doctor_prescription_detail_screen.dart âœ“
  Import fix: '../models/prescription_model.dart' â†’ '../../models/prescription_model.dart' âœ“


### SCREENS - PATIENT ###
modules/patient/screens/patient_home_screen.dart 
  â†’ lib/screens/patient/patient_home_screen.dart âœ“
  Import fix: '../../health_notes/screens/...' â†’ 'health_notes_screen.dart' âœ“
  Import fix: '../../treatment_plan/screens/...' â†’ 'patient_treatment_plan_list_screen.dart' âœ“
  Import fix: '../../prescriptions/screens/...' â†’ 'patient_prescription_list_screen.dart' âœ“

modules/patient/screens/patient_details_screen.dart 
  â†’ lib/screens/patient/patient_details_screen.dart âœ“

modules/health_notes/screens/health_notes_screen.dart 
  â†’ lib/screens/patient/health_notes_screen.dart âœ“
  Import fix: '../services/...' â†’ '../../services/...' âœ“

modules/health_notes/screens/edit_health_notes_screen.dart 
  â†’ lib/screens/patient/edit_health_notes_screen.dart âœ“
  Import fix: '../services/...' â†’ '../../services/...' âœ“

modules/treatment_plan/screens/patient_treatment_plan_list_screen.dart 
  â†’ lib/screens/patient/patient_treatment_plan_list_screen.dart âœ“
  Import fix: '../../treatment_plan/services/...' â†’ '../../services/treatment_plan_service.dart' âœ“

modules/prescriptions/screens/patient_prescription_list_screen.dart 
  â†’ lib/screens/patient/patient_prescription_list_screen.dart âœ“
  Import fix: 'prescription_detail_screen.dart' â†’ '../common/prescription_detail_screen.dart' âœ“


### SCREENS - COMMON ###
modules/prescriptions/screens/prescription_detail_screen.dart 
  â†’ lib/screens/common/prescription_detail_screen.dart âœ“

modules/prescriptions/screens/prescription_list_screen.dart 
  â†’ lib/screens/common/prescription_list_screen.dart âœ“
  Import fix: '../models/prescription_model.dart' â†’ '../../models/prescription_model.dart' âœ“

modules/prescriptions/screens/prescription_qr_screen.dart 
  â†’ lib/screens/common/prescription_qr_screen.dart âœ“


### SCREENS - PHARMACY ###
modules/pharmacy/screens/pharmacy_home_screen.dart 
  â†’ lib/screens/pharmacy/pharmacy_home_screen.dart âœ“

modules/pharmacy/screens/pharmacy_scan_screen.dart 
  â†’ lib/screens/pharmacy/pharmacy_scan_screen.dart âœ“

modules/pharmacy/screens/pharmacy_verify_screen.dart 
  â†’ lib/screens/pharmacy/pharmacy_verify_screen.dart âœ“

modules/pharmacy/screens/pharmacy_history_screen.dart 
  â†’ lib/screens/pharmacy/pharmacy_history_screen.dart âœ“

modules/prescriptions/screens/pharmacy_confirm_screen.dart 
  â†’ lib/screens/pharmacy/pharmacy_confirm_screen.dart âœ“
  Import fix: '../models/prescription_model.dart' â†’ '../../models/prescription_model.dart' âœ“


### SCREENS - COMMON (THÃŠM Má»šI) ###
lib/screens/common/ehr_records_list_screen.dart âœ“
lib/screens/common/ehr_record_detail_screen.dart âœ“
lib/screens/ai_classification_demo_screen.dart âœ“


ğŸ”„ III. IMPORT FIXES ÄÃƒ THá»°C HIá»†N
===============================================

âœ“ Services:
  - prescription_service.dart: OK (relative path váº«n dÃ¹ng Ä‘Æ°á»£c)
  - health_notes_service.dart: OK
  - treatment_plan_service.dart: '../models/treatment_plan.dart' â†’ '../models/treatment_plan_model.dart'

âœ“ Doctor Screens:
  - create_treatment_plan_screen.dart: '../models/treatment_plan.dart' â†’ '../../models/treatment_plan_model.dart'
  - treatment_plan_detail_screen.dart: '../models/treatment_plan.dart' â†’ '../../models/treatment_plan_model.dart'
  - treatment_plan_list_screen.dart: '../models/treatment_plan.dart' â†’ '../../models/treatment_plan_model.dart'
  - create_prescription_screen.dart: '../models/*' â†’ '../../models/*'
  - doctor_prescription_list_screen.dart: '../models/*' â†’ '../../models/*'
  - doctor_prescription_detail_screen.dart: '../models/*' â†’ '../../models/*'
  - edit_prescription_screen.dart: '../models/*' â†’ '../../models/*'

âœ“ Patient Screens:
  - patient_home_screen.dart: Cross-module imports â†’ same-folder imports
  - health_notes_screen.dart: '../services' â†’ '../../services'
  - edit_health_notes_screen.dart: '../services' â†’ '../../services'
  - patient_treatment_plan_list_screen.dart: Removed old module paths
  - patient_prescription_list_screen.dart: 'prescription_detail_screen.dart' â†’ '../common/prescription_detail_screen.dart'

âœ“ Common Screens:
  - prescription_list_screen.dart: '../models/*' â†’ '../../models/*'

âœ“ Pharmacy Screens:
  - pharmacy_confirm_screen.dart: '../models/*' â†’ '../../models/*'


ğŸ“ IV. Cáº¬P NHáº¬T MAIN.DART
===============================================

OLD IMPORTS (modules structure):
  import 'modules/auth/screens/auth_gate.dart';
  import 'modules/health_notes/screens/edit_health_notes_screen.dart';
  import 'modules/treatment_plan/screens/treatment_plan_list_screen.dart';
  import 'modules/pharmacy/screens/pharmacy_scan_screen.dart';
  import 'modules/doctor/screens/doctor_patient_details_screen.dart';
  import 'modules/prescriptions/screens/doctor_prescription_list_screen.dart';

NEW IMPORTS (new structure):
  import 'screens/auth/auth_gate.dart';
  import 'screens/patient/edit_health_notes_screen.dart';
  import 'screens/doctor/treatment_plan_list_screen.dart';
  import 'screens/pharmacy/pharmacy_scan_screen.dart';
  import 'screens/doctor/doctor_patient_details_screen.dart';
  import 'screens/doctor/doctor_prescription_list_screen.dart';
  import 'screens/common/prescription_detail_screen.dart';

âœ“ UPDATED: main.dart


âš ï¸ V. LÆ¯á»šI Lá»–I TIá»€M áº¨N VÃ€ GIáº¢I PHÃP
===============================================

1. Duplicate Screen Names:
   âš ï¸ ISSUE: pharmacy_scan_screen.dart tá»“n táº¡i á»Ÿ:
      - modules/pharmacy/screens/pharmacy_scan_screen.dart (Ä‘Ã£ copy)
      - modules/prescriptions/screens/pharmacy_scan_screen.dart (khÃ¡c logic?)
   âœ“ SOLUTION: Chá»‰ copy tá»« modules/pharmacy (files cÆ¡ báº£n)

2. Model Naming:
   âš ï¸ ISSUE: treatment_plan.dart â†’ treatment_plan_model.dart
   âœ“ SOLUTION: ÄÃ£ rename khi copy, update all imports

3. Service Imports:
   âœ“ OK: Services váº«n dÃ¹ng ../models vÃ¬ cÃ¹ng cáº¥p thÆ° má»¥c (lib/services, lib/models)

4. Screen Cross-Imports:
   âœ“ OK: ÄÃ£ fix táº¥t cáº£ screen-to-screen imports
   Example: patient_prescription_list_screen â†’ ../common/prescription_detail_screen


ğŸ—‘ï¸ VI. STEP 8 - XÃ“A MODULES (SAU KHI KIá»‚M TRA)
===============================================

Sau khi test project vÃ  cháº¯c cháº¯n má»i thá»© hoáº¡t Ä‘á»™ng:

  del /s /q 'd:\KHA\VKU\Nam_4\Ki_3\DACN\ehr_app\lib\modules'

Hoáº·c qua GUI: XÃ³a folder ğŸ“‚ lib/modules/


âœ… VII. Tá»”NG Káº¾T
===============================================

âœ“ Models: 4 files migrated
âœ“ Services: 3 files migrated + 1 giá»¯ nguyÃªn
âœ“ Screens: 
  - Auth: 4 files
  - Doctor: 11 files
  - Patient: 6 files
  - Common: 5 files (3 existing + 2 new)
  - Pharmacy: 5 files
âœ“ Total Screens: 31 files

âœ“ Import Updates: ~25 files fixed
âœ“ main.dart: Updated with new import paths
âœ“ No conflicts: Táº¥t cáº£ files Ä‘Ã£ Ä‘Æ°á»£c organize theo logic

ğŸ“Œ READY FOR TESTING!

BÆ°á»›c tiáº¿p theo:
1. Run `flutter pub get` Ä‘á»ƒ update dependencies
2. Run `flutter analyze` Ä‘á»ƒ check lá»—i import
3. Run á»©ng dá»¥ng vÃ  test cÃ¡c routes
4. Sau khi má»i thá»© ok â†’ xÃ³a folder modules/
